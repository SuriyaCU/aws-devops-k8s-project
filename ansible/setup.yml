- hosts: devops
  become: yes

  tasks:
  - name: Install packages
    apt:
      name:
        - docker.io
        - curl
      update_cache: yes

  - name: Start Docker
    service:
      name: docker
      state: started
      enabled: true

  - name: Install kubectl
    shell: |
      curl -LO https://storage.googleapis.com/kubernetes-release/release/`curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt`/bin/linux/amd64/kubectl
      chmod +x kubectl
      mv kubectl /usr/local/bin/

  - name: Install Minikube
    shell: |
      curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64
      install minikube-linux-amd64 /usr/local/bin/minikube

  - name: Start Minikube
    shell: minikube start --driver=docker
